(jbuild_version 1)

(library
 ((name subsocia_sync_ldap)
  (modules (Config Netldapx Sync Template Variable))
  (flags (-thread))
  (preprocess (pps (ppx_compose lwt_ppx ppx_regexp)))
  (libraries
   (angstrom
    ppx_compose.runtime
    inifiles
    ldap
    lwt lwt.preemptive
    netclient netgss-system
    re.pcre
    subsocia subsocia.data))))

(executable
 ((name main)
  (modules (Main))
  (flags (-thread))
  (preprocess (pps (lwt_ppx)))
  (libraries (cmdliner subsocia_sync_ldap))))

(install
 ((section bin)
  (files ((main.exe as subsocia-sync-ldap)))))
